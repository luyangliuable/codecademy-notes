# Buffer Overflow
<!-- markdown-toc start - Don't edit this section. Run M-x markdown-toc-refresh-toc -->
**Table of Contents**

- [Buffer Overflow](#buffer-overflow)
    - [Countermeasures](#countermeasures)
    - [System level mitigations](#system-level-mitigations)

<!-- markdown-toc end -->


Occurs when more data is written to a buffer than it can hold


## Countermeasures
* **Input validation:** Validate user input to ensure that it is within the expected range and format.
* **Memory protection:** Use memory protection mechanisms such as stack canaries, non-executable stack, and Address Space Layout Randomization (ASLR) to prevent buffer overflow attacks.
* **Using safe libraries:** Use safe libraries that perform their own input validation, such as the C standard library's string functions.
* **Compiler-based protection:** Use compilers that provide built-in protection against buffer overflow attacks, such as stack overflow protection, and buffer overflow detection.
* **Code review:** Regularly review your code for potential buffer overflow vulnerabilities and fix any issues that are found.
* **Run-time protection:** Use run-time protection mechanisms such as Data Execution Prevention (DEP) and Control Flow Integrity (CFI) to detect and prevent buffer overflow attacks.
* **Patching:** Keep your software and operating system up-to-date with the latest security patches to fix any known buffer overflow vulnerabilities.

## System level mitigations
* Address randomisation: randomise the start location of a stack, and other types of memory, such as heap, libraries, etc.
    * All areas of process are located at random places
    * May cause compatibility
    * Often reduced range of the addresses are available for randomisation
* Stackshield: Copy return address at some other place to check whether it is modified.
* Stackguard: Detect modification of return address by placing guard between buffer and return address.
* Hardware protection: modern CPU supports NX (No-eXecute) bit. OS can mark memory region as non-executable.
